

<!DOCTYPE html>
<html lang="zh-cn" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Python 入门 - 基础语法参考 - iaosee</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  <meta name="keywords" content="iaosee, iaosee's blog, Web, Front-end, JavaScript, TypeScript, Graphics, 2D/3D, Canvas, WebGL">
  <meta name="description" content="我有一个需求：去批量下载某网站的图片，图片名称由一定的...">
  <meta name="author" content="iaosee">
  <link rel="icon" href="/images/icons/favicon-16x16.ico" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.ico" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="https://at.alicdn.com/t/font_1445822_p6ry5n7lrr.css">

  

  
    
<link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/highlight.js/11.4.0/styles/github.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/highlight.js/11.4.0/styles/github-dark.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      loading: {
        gif: '/images/theme/loading.gif',
        lottie: ''
      },
      lazyload: {
        enable: true,
        only_post: 'false',
        loading: {
          gif: '/images/theme/loading.gif',
          lottie: ''
        }
      },
      donate: {
        enable: false,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        always_show: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '',
          api: 'https://api.xsot.cn/bing?jump=true',
          return_type: 'image',
          data_contents: '["urls","regular"]'
        },
        motto: {
          default: '菡萏香销翠叶残，西风愁起绿波间。',
          typing: true,
          api: 'https://v2.jinrishici.com/one.json',
          data_contents: '["data","content"]'
        },
      },
      qrcode: {
        enable: false,
        type: 'url',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'default'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      },
      search: {
        enable: false,
        path: ''
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 7.3.0"></head>

<body class="lock-screen">
  <div class="loading" id="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
      
    </div>
    <div class="center">Python 入门 - 基础语法参考</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/galleries/ " class="underline "> 相册</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/tags/ " class="underline "> 标签</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-1"></div>
      <div class="col-xl-8"><article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="/images/article/python-lang-logo.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">Python 入门 - 基础语法参考</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>十一月 05, 2020</span>
      
        <span class="post-info-item">
          <i class="iconfont iconeye"></i><span id="/2020/11/05/Python-Basic-Syntax-Reference/" class="leancloud-counter" data-flag-title="Python 入门 - 基础语法参考"></span>
        </span>
        <span class="post-info-item">
          <i class="iconfont iconheart"></i><span id="/2020/11/05/Python-Basic-Syntax-Reference/" class="leancloud-like" data-flag-title="Python 入门 - 基础语法参考"></span>
        </span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>20898</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        
        <p>我有一个需求：去批量下载某网站的图片，图片名称由一定的规则组成，将下载的图片合并组成为 PDF 文件，准备使用 Python 去操作。</p>
<p>最近用 Python 写一些自动化的脚本，发现写一段就要去查询一下 Python 某个语法怎么写，之前使用 Python 写点脚本还写得挺顺，但是由于好久没有碰过 Python，基本连语法都忘光了。Python 写一些自动话脚本是非常方便的，比如发个网络请求，处理一些文件。编程语言总是学了就忘，所以在这里记录一下 Python 的基础语法，方便以后查阅参考。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p><strong>整数</strong></p>
<p>Python 可以处理任意大小的整数，当然包括负整数，在程序中的表示方法和数学上的写法一模一样，例如：1，100，-8080，0，等等。对于很大的数，例如 10000000000，很难数清楚 0 的个数。Python 允许在数字中间以_分隔，因此，写成 <code>10_000_000_000</code> 和 <code>10000000000</code> 是完全一样的。</p>
<p><strong>浮点数</strong></p>
<p>浮点数也就是小数，之所以称为浮点数，是因为按照科学记数法表示时，一个浮点数的小数点位置是可变的，比如，1.23x10<sup>9</sup> 和12.3x10<sup>8</sup> 是完全相等的。浮点数可以用数学写法，如 1.23，3.14，-9.01，等等。</p>
<p><strong>字符串</strong></p>
<p>字符串是以单引号 <code>&#39;</code> 或双引号 <code>&quot;</code> 括起来的任意文本，比如 <code>&#39;abc&#39;</code> ，<code>&quot;xyz&quot;</code> 等等。请注意，’’ 或 “” 本身只是一种表示方式，不是字符串的一部分，因此，字符串 ‘abc’ 只有 a，b，c 这3个字符。如果 ‘本身也是一个字符，那就可以用 “” 括起来，比如 “I’m OK” 包含的字符是 I，’，m，空格，O，K这 6 个字符。</p>
<p><strong>布尔值</strong></p>
<p>布尔值和布尔代数的表示完全一致，一个布尔值只有 <code>True</code> 、 <code>False</code> 两种值。布尔值可以用 <code>and</code> 、 <code>or</code> 和 <code>not</code> 运算。</p>
<p><strong>空值</strong></p>
<p>空值是 Python 里一个特殊的值，用 <code>None</code> 表示。None 不能理解为 0，因为 0 是有意义的，而 None 是一个特殊的空值。</p>
<h2 id="字符串和编码"><a href="#字符串和编码" class="headerlink" title="字符串和编码"></a>字符串和编码</h2><p>由于计算机是美国人发明的，因此，最早只有127个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为 ASCII 编码。各个国家的文字又有不同的编码，因此多语言混合的文本中，显示出来会有乱码。Unicode 把所有语言都统一到一套编码里，就不会再有乱码问题，用两个字节表示一个字符（如果要用到非常偏僻的字符，就需要 4 个字节）。</p>
<p>新的问题：如果统一成Unicode编码，乱码问题从此消失，但是如果写的文本基本上全部是英文的话，用 Unicode 编码比 ASCII 编码需要多一倍的存储空间，在存储和传输上就十分不划算。</p>
<p>UTF-8编码：本着节约的精神，又出现了把 Unicode 编码转化为“可变长编码”的 UTF-8 编码，UTF-8 编码把一个 Unicode 字符根据不同的数字大小编码成 1-6 个字节，常用的英文字母被编码成 1 个字节，汉字通常是 3 个字节，只有很生僻的字符才会被编码成 4-6 个字节。</p>
<p>所以如果你要传输的文本包含大量英文字符，用 UTF-8 编码就能节省空间。所以我们会看到很多网页的源码上会有类似 <code>&lt;meta charset=&quot;UTF-8&quot; /&gt;</code> 的信息，表示该网页正是用的 UTF-8 编码。</p>
<p>由于 Python 源代码也是一个文本文件，所以，当你的源代码中包含中文的时候，在保存源代码时，就需要务必指定保存为 UTF-8 编码。当 Python 解释器读取源代码时，为了让它按 UTF-8 编码读取，我们通常在文件开头写上这两行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python3</span><br><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br></code></pre></td></tr></table></figure>

<p>格式化字符串</p>
<p>格式化方式和C语言是一致的，用 <code>%</code> 实现，例如 <code>&#39;Hello, %s&#39; % &#39;world&#39;</code>，</p>
<ul>
<li><code>%d</code> 整数</li>
<li><code>%f</code> 浮点数</li>
<li><code>%s</code> 字符串</li>
<li><code>%x</code> 十六进制整数</li>
</ul>
<p>使用字符串的 <code>format()</code> 方法，例如 <code>&#39;Hello, &#123;0&#125;, 成绩提升了 &#123;1:.1f&#125;%&#39;.format(&#39;小明&#39;, 17.125)</code></p>
<p>使用以 f 开头的字符串，字符串如果包含 <code>&#123;xxx&#125;</code> 会以对应的变量替换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">r = <span class="hljs-number">2.5</span><br>s = <span class="hljs-number">3.14</span> * r ** <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;The area of a circle with radius <span class="hljs-subst">&#123;r&#125;</span> is <span class="hljs-subst">&#123;s:<span class="hljs-number">.2</span>f&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="list-和-tuple"><a href="#list-和-tuple" class="headerlink" title="list 和 tuple"></a>list 和 tuple</h2><p><strong>list</strong></p>
<p>Python 内置的一种数据类型，list 是一种有序的集合，可以随时添加和删除其中的元素。<code>classmates = [&#39;Michael&#39;, &#39;Bob&#39;, &#39;Tracy&#39;]</code></p>
<p><code>len()</code> 函数可以获得list元素的个数，用索引来访问 list 中每一个位置的元素 <code>classmates[0]</code> <code>classmates[1]</code>，取最后一个元素 <code>classmates[-1]</code> 当索引超出了范围时，Python 会报一个 IndexError 错误，要确保索引不要越界。</p>
<p>list 是一个可变的有序表，所以，可以往 list 中追加元素。</p>
<ul>
<li><code>classmates.append(&#39;Adam&#39;)</code> 可以把元素插入到指定的位置</li>
<li><code>classmates.insert(1, &#39;Jack&#39;)</code> 把元素插入到指定的位置，索引号为1的位置</li>
<li><code>classmates.pop()</code> 删除 list 末尾的元素</li>
<li><code>classmates.pop(1)</code> 删除指定位置的元素，其中 i 是索引位置</li>
<li><code>classmates[1] = &#39;Sarah&#39;</code> 把某个元素替换成别的元素，可以直接赋值给对应的索引位置</li>
</ul>
<p>list 里面的元素的数据类型也可以不同，如 <code>L = [&#39;Apple&#39;, 123, True]</code>，list 元素也可以是另一个 list，<code>s = [&#39;python&#39;, &#39;java&#39;, [&#39;asp&#39;, &#39;php&#39;], &#39;scheme&#39;]</code>，可以看成是一个二维数，要拿到 <code>&#39;php&#39;</code> 使用 <code>s[2][1]</code></p>
<p><strong>tuple</strong></p>
<p>另一种有序列表叫元组：tuple。list 非常类似，但 tuple 一旦初始化就不能修改。例如 <code>classmates = (&#39;Michael&#39;, &#39;Bob&#39;, &#39;Tracy&#39;)</code> ，它没有 append()，insert() 这样的方法，可以下标访问，但不能赋值成另外的元素。只有 1 个元素的 tuple定 义时必须加一个逗号,，来消除歧义 <code>t = (1,)</code>。</p>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><p>if 语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># x是非零数值、非空字符串、非空list等，就判断为True，否则为False</span><br><span class="hljs-keyword">if</span> x:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;True&#x27;</span>)<br><br><br>age = <span class="hljs-number">20</span><br><span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;your age is&#x27;</span>, age)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;adult&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>if else 语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">age = <span class="hljs-number">3</span><br><span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;your age is&#x27;</span>, age)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;adult&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;your age is&#x27;</span>, age)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;teenager&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>多重 if, elif 是 else if 的简写</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> &lt;条件判断<span class="hljs-number">1</span>&gt;:<br>    &lt;执行<span class="hljs-number">1</span>&gt;<br><span class="hljs-keyword">elif</span> &lt;条件判断<span class="hljs-number">2</span>&gt;:<br>    &lt;执行<span class="hljs-number">2</span>&gt;<br><span class="hljs-keyword">elif</span> &lt;条件判断<span class="hljs-number">3</span>&gt;:<br>    &lt;执行<span class="hljs-number">3</span>&gt;<br><span class="hljs-keyword">else</span>:<br>    &lt;执行<span class="hljs-number">4</span>&gt;<br></code></pre></td></tr></table></figure>

<p>match 语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">score = <span class="hljs-string">&#x27;B&#x27;</span><br><br><span class="hljs-keyword">match</span> score:<br>  <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;A&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;score is A.&#x27;</span>)<br>  <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;B&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;score is B.&#x27;</span>)<br>  <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;C&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;score is C.&#x27;</span>)<br>  <span class="hljs-keyword">case</span> _: <span class="hljs-comment"># _表示匹配到其他任何情况</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;score is ???.&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>match 语句除了可以匹配简单的单个值外，还可以匹配多个值、匹配一定范围，并且把匹配后的值绑定到变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">age = <span class="hljs-number">15</span><br><br><span class="hljs-keyword">match</span> age:<br>  <span class="hljs-keyword">case</span> x <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">10</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;&lt; 10 years old: <span class="hljs-subst">&#123;x&#125;</span>&#x27;</span>)<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;10 years old.&#x27;</span>)<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">11</span> | <span class="hljs-number">12</span> | <span class="hljs-number">13</span> | <span class="hljs-number">14</span> | <span class="hljs-number">15</span> | <span class="hljs-number">16</span> | <span class="hljs-number">17</span> | <span class="hljs-number">18</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;11~18 years old.&#x27;</span>)<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">19</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;19 years old.&#x27;</span>)<br>  <span class="hljs-keyword">case</span> _:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;not sure.&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>match 语句还可以匹配列表，功能非常强大</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">args = [<span class="hljs-string">&#x27;gcc&#x27;</span>, <span class="hljs-string">&#x27;hello.c&#x27;</span>, <span class="hljs-string">&#x27;world.c&#x27;</span>]<br><span class="hljs-comment"># args = [&#x27;clean&#x27;]</span><br><span class="hljs-comment"># args = [&#x27;gcc&#x27;]</span><br><br><span class="hljs-keyword">match</span> args:<br>  <span class="hljs-comment"># 如果仅出现gcc，报错:</span><br>  <span class="hljs-keyword">case</span> [<span class="hljs-string">&#x27;gcc&#x27;</span>]:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;gcc: missing source file(s).&#x27;</span>)<br>  <span class="hljs-comment"># 出现gcc，且至少指定了一个文件:</span><br>  <span class="hljs-keyword">case</span> [<span class="hljs-string">&#x27;gcc&#x27;</span>, file1, *files]:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;gcc compile: &#x27;</span> + file1 + <span class="hljs-string">&#x27;, &#x27;</span> + <span class="hljs-string">&#x27;, &#x27;</span>.join(files))<br>  <span class="hljs-comment"># 仅出现clean:</span><br>  <span class="hljs-keyword">case</span> [<span class="hljs-string">&#x27;clean&#x27;</span>]:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;clean&#x27;</span>)<br>  <span class="hljs-keyword">case</span> _:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;invalid command.&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>Python 的循环有两种，一种是 <code>for...in</code> 循环，把 list 或 tuple 中的每个元素迭代出来</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">names = [<span class="hljs-string">&#x27;Michael&#x27;</span>, <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-string">&#x27;Tracy&#x27;</span>]<br><span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> names:<br>  <span class="hljs-built_in">print</span>(name)<br></code></pre></td></tr></table></figure>

<p>另一种循环是 while 循环</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>n = <span class="hljs-number">99</span><br><br><span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<br>  <span class="hljs-built_in">sum</span> = <span class="hljs-built_in">sum</span> + n<br>  n = n - <span class="hljs-number">2</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br></code></pre></td></tr></table></figure>

<p>for 循环迭代</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">d = &#123;<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;c&#x27;</span>: <span class="hljs-number">3</span>&#125;<br><br><span class="hljs-comment"># 默认迭代 key</span><br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> d:<br>  <span class="hljs-built_in">print</span>(key)<br><br><span class="hljs-comment"># 迭代 value</span><br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> d.values():<br>  <span class="hljs-built_in">print</span>(key)<br><br><span class="hljs-comment"># 迭代 key value</span><br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> d.items()<br>  <span class="hljs-built_in">print</span>(key)<br><br><span class="hljs-comment"># enumerate函数可以把一个list变成索引-元素对，这样就能同时迭代索引和元素本</span><br><span class="hljs-keyword">for</span> i, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>([<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>]):<br>  <span class="hljs-built_in">print</span>(i, key)<br></code></pre></td></tr></table></figure>

<p>Python的 for 循环不仅可以用在 list 或 tuple 上，还可以作用在其他可迭代对象上。在循环中， <code>break</code> 语句可以提前退出循环，在循环过程中，也可以通过 <code>continue</code> 语句，跳过当前的这次循环，和其他语言一样。</p>
<p>可以 通过 collections.abc 模块的 Iterable 类型判断一个值是否可迭代对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections.abc <span class="hljs-keyword">import</span> Iterable<br><br><br><span class="hljs-built_in">isinstance</span>(<span class="hljs-string">&#x27;abc&#x27;</span>, Iterable)     <span class="hljs-comment"># True</span><br><span class="hljs-built_in">isinstance</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], Iterable)   <span class="hljs-comment"># True</span><br><span class="hljs-built_in">isinstance</span>(<span class="hljs-number">123</span>, Iterable)       <span class="hljs-comment"># False</span><br></code></pre></td></tr></table></figure>

<h2 id="dict-和-set"><a href="#dict-和-set" class="headerlink" title="dict 和 set"></a>dict 和 set</h2><p>dict 的支持，dict 全称 dictionary ，在其他语言中也称为 map。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">d = &#123;<span class="hljs-string">&#x27;Michael&#x27;</span>: <span class="hljs-number">95</span>, <span class="hljs-string">&#x27;Bob&#x27;</span>: <span class="hljs-number">75</span>, <span class="hljs-string">&#x27;Tracy&#x27;</span>: <span class="hljs-number">85</span>&#125;<br>d[<span class="hljs-string">&#x27;Michael&#x27;</span>] <span class="hljs-comment">#95  访问</span><br>d[<span class="hljs-string">&#x27;Bob&#x27;</span>] = <span class="hljs-number">80</span> <span class="hljs-comment"># 修改</span><br>d[<span class="hljs-string">&#x27;Jack&#x27;</span>] <span class="hljs-comment"># 不存在 - 报错</span><br><br><span class="hljs-comment"># 判断</span><br><span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;Thomas&#x27;</span> <span class="hljs-keyword">in</span> d<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;OK&#x27;</span>)<br><br><span class="hljs-comment"># 获取 不存在得到 None</span><br>d.get(<span class="hljs-string">&#x27;Thomas&#x27;</span>)<br><br><span class="hljs-comment"># 若不存在则获得 -1</span><br>d.get(<span class="hljs-string">&#x27;Thomas&#x27;</span>, -<span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># 删除</span><br>d.pop(<span class="hljs-string">&#x27;Bob&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>set 是一组 key 的集合，但不存储 value。由于 key 不能重复，所以，在 set 中，没有重复的 key。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">s = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;<br><span class="hljs-comment"># 通过 list 作为输入</span><br>s = <span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br><br><span class="hljs-comment"># 添加元素</span><br>s.add(<span class="hljs-number">4</span>)<br><br><span class="hljs-comment"># 移除元素</span><br>remove(key)<br><br><span class="hljs-comment"># set 可以做运算</span><br>s1 = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;<br>s2 = &#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;<br><br>s3 = s1 &amp; s2    <span class="hljs-comment"># &#123;2, 3&#125;</span><br>s4 = s1 | s2    <span class="hljs-comment"># &#123;1, 2, 3, 4&#125;</span><br></code></pre></td></tr></table></figure>


<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>定义一个函数要使用 def 语句，依次写出函数名、括号、括号中的参数和冒号 : ，然后，在缩进块中编写函数体，函数的返回值用 return 语句返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_abs</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">if</span> x &gt;= <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">return</span> -x<br><br><span class="hljs-built_in">print</span>(my_abs(-<span class="hljs-number">99</span>))<br></code></pre></td></tr></table></figure>

<p>定义一个什么事也不做的空函数，可以用pass语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">nop</span>():<br>  <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure>

<p>函数参数有 必选参数外，默认参数、可变参数和关键字参数。</p>
<p>默认参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">power</span>(<span class="hljs-params">x, n=<span class="hljs-number">2</span></span>):<br>  s = <span class="hljs-number">1</span><br>  <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<br>    n = n - <span class="hljs-number">1</span><br>    s = s * x<br>  <span class="hljs-keyword">return</span> s<br><br>power(<span class="hljs-number">5</span>)<br>power(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)<br>power(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure>

<p>可变参数，函数内部接收到的是一个tuple，Python 允许你在 list 或 tuple 前面加一个 <code>*</code> 号，把 list 或 tuple 的元素变成可变参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">*numbers</span>):<br>  <span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> numbers:<br>    <span class="hljs-built_in">sum</span> = <span class="hljs-built_in">sum</span> + n * n<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br><br>calc(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>calc(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>calc(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><br>nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>calc(*nums)<br></code></pre></td></tr></table></figure>

<p>关键字参数，关键字参数允许你传入 0 个或任意个含参数名的参数，这些关键字参数在函数内部自动组装为一个 dict。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">person</span>(<span class="hljs-params">name, age, **kw</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;name:&#x27;</span>, name, <span class="hljs-string">&#x27;age:&#x27;</span>, age, <span class="hljs-string">&#x27;other:&#x27;</span>, kw)<br><br>person(<span class="hljs-string">&#x27;Michael&#x27;</span>, <span class="hljs-number">30</span>)<br>person(<span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-number">35</span>, city=<span class="hljs-string">&#x27;Beijing&#x27;</span>)<br>person(<span class="hljs-string">&#x27;Adam&#x27;</span>, <span class="hljs-number">45</span>, gender=<span class="hljs-string">&#x27;M&#x27;</span>, job=<span class="hljs-string">&#x27;Engineer&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>命名关键字参数，对于关键字参数，函数的调用者可以传入任意不受限制的关键字参数。如果要限制关键字参数的名字，就可以用命名关键字参数，例如，只接收city和job作为关键字参数。命名关键字参数需要一个特殊分隔符 <code>*</code>，<code>*</code> 后面的参数被视为命名关键字参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">person</span>(<span class="hljs-params">name, age, *, city, job</span>):<br>  <span class="hljs-built_in">print</span>(name, age, city, job)<br><br>person(<span class="hljs-string">&#x27;Jack&#x27;</span>, <span class="hljs-number">24</span>, city=<span class="hljs-string">&#x27;Beijing&#x27;</span>, job=<span class="hljs-string">&#x27;Engineer&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>如果函数定义中已经有了一个可变参数，后面跟着的命名关键字参数就不再需要一个特殊分隔符 <code>*</code> 了，命名关键字参数必须传入参数名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">person</span>(<span class="hljs-params">name, age, *args, city, job</span>):<br>  <span class="hljs-built_in">print</span>(name, age, args, city, job)<br><br>person(<span class="hljs-string">&#x27;Jack&#x27;</span>, <span class="hljs-number">24</span>, city=<span class="hljs-string">&#x27;Beijing&#x27;</span>, job=<span class="hljs-string">&#x27;Engineer&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>命名关键字参数可以有缺省值，从而简化调用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">person</span>(<span class="hljs-params">name, age, *, city=<span class="hljs-string">&#x27;Beijing&#x27;</span>, job</span>):<br>  <span class="hljs-built_in">print</span>(name, age, city, job)<br><br>person(<span class="hljs-string">&#x27;Jack&#x27;</span>, <span class="hljs-number">24</span>, job=<span class="hljs-string">&#x27;Engineer&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>在 Python 中定义函数，可以用必选参数、默认参数、可变参数、关键字参数和命名关键字参数，这5种参数都可以组合使用。但是注意，参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。对于任意函数，都可以通过类似func(*args, **kw)的形式调用它，无论它的参数是如何定义的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f1</span>(<span class="hljs-params">a, b, c=<span class="hljs-number">0</span>, *args, **kw</span>):<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a =&#x27;</span>, a, <span class="hljs-string">&#x27;b =&#x27;</span>, b, <span class="hljs-string">&#x27;c =&#x27;</span>, c, <span class="hljs-string">&#x27;args =&#x27;</span>, args, <span class="hljs-string">&#x27;kw =&#x27;</span>, kw)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f2</span>(<span class="hljs-params">a, b, c=<span class="hljs-number">0</span>, *, d, **kw</span>):<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a =&#x27;</span>, a, <span class="hljs-string">&#x27;b =&#x27;</span>, b, <span class="hljs-string">&#x27;c =&#x27;</span>, c, <span class="hljs-string">&#x27;d =&#x27;</span>, d, <span class="hljs-string">&#x27;kw =&#x27;</span>, kw)<br></code></pre></td></tr></table></figure>


<h2 id="Python-高级特性"><a href="#Python-高级特性" class="headerlink" title="Python 高级特性"></a>Python 高级特性</h2><p><strong>切片操作</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">L = [<span class="hljs-string">&#x27;Michael&#x27;</span>, <span class="hljs-string">&#x27;Sarah&#x27;</span>, <span class="hljs-string">&#x27;Tracy&#x27;</span>, <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-string">&#x27;Jack&#x27;</span>]<br><br><span class="hljs-comment"># 取前3个元素，用一行代码就可以完成切片，从索引 0 开始取，直到索引 3 为止，但不包括索引 3</span><br>L[<span class="hljs-number">0</span>:<span class="hljs-number">3</span>]  <span class="hljs-comment"># [&#x27;Michael&#x27;, &#x27;Sarah&#x27;, &#x27;Tracy&#x27;]</span><br>L[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>]  <span class="hljs-comment"># [&#x27;Sarah&#x27;, &#x27;Tracy&#x27;]</span><br>L[-<span class="hljs-number">2</span>:]  <span class="hljs-comment"># [&#x27;Bob&#x27;, &#x27;Jack&#x27;]</span><br><br>L = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>))  <span class="hljs-comment"># 先创建一个0-99的数列</span><br>L[:<span class="hljs-number">10</span>]    <span class="hljs-comment"># 取前10个数</span><br>L[-<span class="hljs-number">10</span>:]   <span class="hljs-comment"># 取后10个数</span><br>L[<span class="hljs-number">10</span>:<span class="hljs-number">20</span>]  <span class="hljs-comment"># 前11-20个数</span><br>L[:<span class="hljs-number">10</span>:<span class="hljs-number">2</span>]  <span class="hljs-comment"># 前10个数，每两个取一个  [0, 2, 4, 6, 8]</span><br>L[::<span class="hljs-number">5</span>]    <span class="hljs-comment"># 所有数，每5个取一个</span><br>L[:]      <span class="hljs-comment"># 原样复制一个 list</span><br></code></pre></td></tr></table></figure>

<ul>
<li>tuple 也可以用切片操作，操作的结果仍是tuple，唯一区别是tuple不可变。</li>
<li>字符串’xxx’也可以看成是一种list，每个元素就是一个字符。因此，字符串也可以用切片操作，只是操作结果仍是字符串，很多编程语言中，针对字符串提供了很多各种截取函数（例如，substring），Python 没有针对字符串的截取函数，只需要对切片进行操作。</li>
</ul>
<p><strong>列表生成</strong></p>
<p>列表生成式即 List Comprehensions，是 Python 内置的非常简单却强大的可以用来创建 list 的生成式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 生成 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br><span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>))<br><br><span class="hljs-comment"># 生成 [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span><br>[x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)]<br><br><span class="hljs-comment"># 生成 [4, 16, 36, 64, 100]   加上if判断，筛选出仅偶数的平方</span><br>[x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>) <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>]<br><br><span class="hljs-comment"># 生成 ABC 与 XYZ 的全排列 [&#x27;AX&#x27;, &#x27;AY&#x27;, &#x27;AZ&#x27;, &#x27;BX&#x27;, &#x27;BY&#x27;, &#x27;BZ&#x27;, &#x27;CX&#x27;, &#x27;CY&#x27;, &#x27;CZ&#x27;]</span><br>[m + n <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;ABC&#x27;</span> <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;XYZ&#x27;</span>]<br><br><span class="hljs-comment"># 列出当前目录下的所有文件和目录名</span><br>[d <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">&#x27;.&#x27;</span>)]<br><br><span class="hljs-comment"># 列表生成式也可以使用两个变量来生成list</span><br>d = &#123;<span class="hljs-string">&#x27;x&#x27;</span>: <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>: <span class="hljs-string">&#x27;C&#x27;</span> &#125;<br>[k + <span class="hljs-string">&#x27;=&#x27;</span> + v <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> d.items()]<br><br><span class="hljs-comment"># 把一个list中所有的字符串变成小写</span><br>L = [<span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-string">&#x27;World&#x27;</span>, <span class="hljs-string">&#x27;IBM&#x27;</span>, <span class="hljs-string">&#x27;Apple&#x27;</span>]<br>[s.lower() <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> L]<br></code></pre></td></tr></table></figure>

<p><strong>生成器</strong></p>
<p>要创建一个 generator，有很多种方法。第一种方法很简单，只要把一个列表生成式的 [] 改成 ()，就创建了一个 generator ，通过 next() 函数获得 generator 的下一个返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">L = [x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br>g = (x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))<br><span class="hljs-built_in">print</span>(g)<br><br><span class="hljs-comment"># 使用 for 迭代</span><br><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> g:<br>  <span class="hljs-built_in">print</span>(g)<br><br><br><span class="hljs-comment"># 普通函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params"><span class="hljs-built_in">max</span></span>):<br>    n, a, b = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> n &lt; <span class="hljs-built_in">max</span>:<br>        <span class="hljs-built_in">print</span>(b)<br>        a, b = b, a + b<br>        n = n + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;done&#x27;</span><br><br><span class="hljs-comment"># generator 函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params"><span class="hljs-built_in">max</span></span>):<br>    n, a, b = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> n &lt; <span class="hljs-built_in">max</span>:<br>        <span class="hljs-keyword">yield</span> b<br>        a, b = b, a + b<br>        n = n + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;done&#x27;</span><br></code></pre></td></tr></table></figure>

<p><strong>函数</strong></p>
<p>变量可以指向函数，函数名也是变量，函数可以当作参数传递，函数也可以当作返回值。</p>
<p>闭包：当一个函数返回了一个函数后，其内部的局部变量还被新函数引用，就是内层函数引用了外层函数的局部变量。</p>
<p>nonlocal</p>
<p>如果只是读外层变量的值，我们会发现返回的闭包函数调用一切正常：但是，如果对外层变量赋值，由于Python解释器会把x当作函数fn()的局部变量，它会报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 正常</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>  x = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    <span class="hljs-comment"># 仅读取x的值:</span><br>    <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span><br>  <span class="hljs-keyword">return</span> fn<br><br>f = inc()<br><span class="hljs-built_in">print</span>(f()) <span class="hljs-comment"># 1</span><br><span class="hljs-built_in">print</span>(f()) <span class="hljs-comment"># 1</span><br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 报错</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>  x = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    <span class="hljs-comment"># 写入</span><br>    x = x + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">return</span> fn<br><br>f = inc()<br><span class="hljs-built_in">print</span>(f()) <span class="hljs-comment"># 1</span><br><span class="hljs-built_in">print</span>(f()) <span class="hljs-comment"># 2</span><br></code></pre></td></tr></table></figure>
<p>想引用 <code>inc()</code> 函数内部的 <code>x</code>，所以需要在 <code>fn()</code> 函数内部加一个 <code>nonlocal x</code> 的声明。加上这个声明后，解释器把 <code>fn()</code> 的 <code>x</code> 看作外层函数的局部变量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 报错</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>  x = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    <span class="hljs-keyword">nonlocal</span> x<br>    x = x + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> x<br>  <span class="hljs-keyword">return</span> fn<br><br>f = inc()<br><span class="hljs-built_in">print</span>(f()) <span class="hljs-comment"># 1</span><br><span class="hljs-built_in">print</span>(f()) <span class="hljs-comment"># 2</span><br></code></pre></td></tr></table></figure>

<p><strong>匿名函数</strong></p>
<p>传入函数时，函数作为参数时，有时候不需要显式地定义函数，直接传入匿名函数更方便。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># [1, 4, 9, 16, 25, 36, 49, 64, 81]</span><br><span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * x, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]))<br><br><span class="hljs-comment"># lambda x: x * x 等价于如下函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">return</span> x * x<br><br><span class="hljs-comment"># 匿名函数可以赋值给一个变量</span><br>f = <span class="hljs-keyword">lambda</span> x: x * x<br><br><span class="hljs-comment"># 匿名函数可以作为返回值返回</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">x, y</span>):<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span>: x * x + y * y<br><br></code></pre></td></tr></table></figure>

<p><strong>装饰器 - Decorator</strong></p>
<p>本质上，decorator 就是一个返回函数的高阶函数。使用 <code>@</code> 语法，把 decorator 置于函数的定义处，装饰函数。 wrapper() 函数的参数定义是 <code>(*args, **kw)</code>，因此，wrapper() 函数可以接受任意参数的调用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kw</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;call %s():&#x27;</span> % func.__name__)<br>    <span class="hljs-keyword">return</span> func(*args, **kw)<br>  <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-comment"># 相当于 now = log(now)</span><br><span class="hljs-meta">@log</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">now</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;2024-6-1&#x27;</span>)<br><br><span class="hljs-comment"># 调用 now() 方法将执行 log() 函数中返回的 wrapper() 函数</span><br>now()<br></code></pre></td></tr></table></figure>

<p>如果 decorator 本身需要传入参数，那就需要编写一个返回 decorator 的高阶函数，写出来会更复杂。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">text</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kw</span>):<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%s %s():&#x27;</span> % (text, func.__name__))<br>      <span class="hljs-keyword">return</span> func(*args, **kw)<br>    <span class="hljs-keyword">return</span> wrapper<br>  <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-comment"># 相当于 now = log(&#x27;execute&#x27;)(now)</span><br><span class="hljs-meta">@log(<span class="hljs-params"><span class="hljs-string">&#x27;execute&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">now</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;2024-6-1&#x27;</span>)<br><br>now()<br><span class="hljs-comment"># execute now():</span><br><span class="hljs-comment"># 2024-6-1</span><br></code></pre></td></tr></table></figure>

<p>需要注意的是：函数也是对象，它有 <code>__name__</code> 等属性，但你去看经过decorator装饰之后的函数，它们的 <code>__name__</code> 已经从原来的 <code>&#39;now&#39;</code> 变成了 <code>&#39;wrapper&#39;</code>，因为返回的那个 <code>wrapper()</code> 函数名字就是 <code>&#39;wrapper&#39;</code>，所以，需要把原始函数的 <code>__name__</code> 等属性复制到 <code>wrapper()</code> 函数中，否则，有些依赖函数签名的代码执行就会出错。可以通过 Python 内置的 <code>functools.wraps</code> 实现。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> functools<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br><span class="hljs-meta">  @functools.wraps(<span class="hljs-params">func</span>)</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kw</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;call %s():&#x27;</span> % func.__name__)<br>    <span class="hljs-keyword">return</span> func(*args, **kw)<br>  <span class="hljs-keyword">return</span> wrapper<br></code></pre></td></tr></table></figure>

<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里。很多编程语言都采用这种组织代码的方式。在 Python 中，一个 .py 文件就称之为一个模块（Module）。使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。如果不同的人编写的模块名相同怎么办？为了避免模块名冲突，Python又引入了按目录来组织模块的方法，称为包（Package）。</p>
<p>现在，<code>abc.py</code> 模块的名字就变成了 <code>mymodule.abc</code>，类似的，<code>xyz.py</code> 的模块名变成了 <code>mymodule.xyz</code>。每一个包目录下面都会有一个 <code>__init__.py</code> 的文件，这个文件是必须存在，否则 Python就把这个目录当成普通目录。 <code>__init__.py</code> 可以是空文件，也可以有 Python 代码，因为 <code>__init__.py</code> 本身就是一个模块，而它的模块名就是 <code>mymodule</code>。可以有多级目录，组成多级层次的包结构。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">mymodule<br>├─ __init__.py<br>├─ abc.py<br>└─ xyz.py<br></code></pre></td></tr></table></figure>

<p><strong>使用模块</strong></p>
<p>Python 本身就内置了很多非常有用的模块。通过 <code>import</code> 倒入模块，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-built_in">print</span>(sys.argv)<br><span class="hljs-built_in">print</span>(os.listdir(<span class="hljs-string">&#x27;.&#x27;</span>))<br><br></code></pre></td></tr></table></figure>

<p><strong>作用域</strong></p>
<p>在一个模块中，会定义很多函数和变量，但有的函数和变量我们希望给别人使用，有的函数和变量希望仅仅在模块内部使用。在 Python 中，是通过 <code>_</code> 前缀来实现的。正常的函数和变量名是公开的（public），类似 <code>__xxx__</code> 这样的变量是特殊变量，可以被直接引用，比如上面的 <code>__author__</code> ， <code>__name__</code> 就是特殊变量，模块定义的文档注释也可以用特殊变量 <code>__doc__</code> 访问，我们自己的变量一般不要用这种变量名。</p>
<p>类似 <code>_xxx</code>和 <code>__xxx</code> 这样的函数或变量就是非公开的（private），不应该被直接引用，比如 <code>_abc</code>，<code>__abc</code> 等；private 函数和变量 “不应该” 被直接引用，而不是“不能”被直接引用，是因为 Python 并没有一种方法可以完全限制访问 private 函数或变量，但是从编程习惯上不应该引用 private 函数或变量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_private_1</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, %s&#x27;</span> % name<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">_private_2</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hi, %s&#x27;</span> % name<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">greeting</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(name) &gt; <span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">return</span> _private_1(name)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> _private_2(name)<br></code></pre></td></tr></table></figure>


<h2 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h2><p><strong>类定义</strong></p>
<p>在 Python中，所有数据类型都可以视为对象，当然也可以自定义对象。自定义的对象数据类型就是面向对象中的类（Class）的概念。</p>
<p>类的定义：<code>class</code> 后面紧接着是类名，即 <code>Student</code>，类名通常是大写开头的单词，紧接着是 <code>(object)</code>，表示该类是从哪个类继承下来的。如果没有合适的继承类，就使用 <code>object</code> 类，这是所有类最终都会继承的类。通过 <code>ClassName()</code> 获得该类实例。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 定义 Student 类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, score</span>):<br>    <span class="hljs-variable language_">self</span>.name = name<br>    <span class="hljs-variable language_">self</span>.score = score<br>  <br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_score</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%s: %s&#x27;</span> % (<span class="hljs-variable language_">self</span>.name, <span class="hljs-variable language_">self</span>.score))<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_grade</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.score &gt;= <span class="hljs-number">90</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;A&#x27;</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-variable language_">self</span>.score &gt;= <span class="hljs-number">60</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;B&#x27;</span><br>    <span class="hljs-keyword">else</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;C&#x27;</span><br><br>bart = Student(<span class="hljs-string">&#x27;Bart Simpson&#x27;</span>, <span class="hljs-number">59</span>)<br>lisa = Student(<span class="hljs-string">&#x27;Lisa Simpson&#x27;</span>, <span class="hljs-number">87</span>)<br>bart.print_score()<br>lisa.print_score()<br></code></pre></td></tr></table></figure>

<p><code>__init__</code> 是该类的构造函数，第一个参数永远是 <code>self</code>，表示创建的实例本身。调用的时候 <code>self</code> 不需要传，Python 解释器自己会把实例变量传进去。和普通的函数相比，在类中定义的函数只有一点不同，就是第一个参数永远是实例变量 <code>self</code>，类中的函数称为类的方法。</p>
<p>和静态语言不同，Python 允许对实例变量绑定任何数据，也就是说，对于两个实例变量，虽然它们都是同一个类的不同实例，但拥有的变量名称都可能不同。</p>
<p><strong>访问限制</strong></p>
<p>如果要让内部属性不被外部访问，可以把属性的名称前加上两个下划线 <code>__</code>，在Python中，实例的变量名如果以 <code>__</code> 开头，就变成了一个私有变量（private），只有内部可以访问，外部不能访问。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, score</span>):<br>    <span class="hljs-variable language_">self</span>.__name = name<br>    <span class="hljs-variable language_">self</span>.__score = score<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_score</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%s: %s&#x27;</span> % (<span class="hljs-variable language_">self</span>.__name, <span class="hljs-variable language_">self</span>.__score))<br><br>bart = Student(<span class="hljs-string">&#x27;Bart Simpson&#x27;</span>, <span class="hljs-number">59</span>)<br></code></pre></td></tr></table></figure>

<p>对于外部代码来说，没什么变动，但是已经无法从外部访问 <code>bart.__name</code> 和 <code>bart.__score</code> 了。这样就确保了外部代码不能随意修改对象内部的状态，这样通过访问限制的保护。如果外部代码要获取 <code>name</code> 和 <code>score</code> ，可以给 Student 类增加 <code>get_name</code> 和 <code>get_score</code> 这样的方法；如果又要允许外部代码修改 <code>score</code>，可以再给 Student 类增加 <code>set_score</code>  方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, score</span>):<br>    <span class="hljs-variable language_">self</span>.__name = name<br>    <span class="hljs-variable language_">self</span>.__score = score<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_name</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.__name<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_score</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.__score<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_score</span>(<span class="hljs-params">self, score</span>):<br>    <span class="hljs-variable language_">self</span>.__score = score<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_score</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%s: %s&#x27;</span> % (<span class="hljs-variable language_">self</span>.__name, <span class="hljs-variable language_">self</span>.__score))<br><br>bart = Student(<span class="hljs-string">&#x27;Bart Simpson&#x27;</span>, <span class="hljs-number">59</span>)<br></code></pre></td></tr></table></figure>

<p>注意：双下划线开头的实例变量并不是一定不能从外部访问，不能直接访问 <code>__name</code> 是因为 Python 解释器对外把 <code>__name</code> 变量改成了 <code>_Student__name</code> ，所以，仍然可以通过 <code>bart._Student__name</code> 来访问 <code>__name</code> 变量，但是不建议这么干，因为不同版本的 Python 解释器可能会把 <code>__name</code> 改成不同的变量名。Python 本身没有任何机制阻止你干坏事，一切全靠自觉。</p>
<p><strong>实例属性和类属性</strong></p>
<p>给实例绑定属性的方法是通过实例变量，或者通过 <code>self</code> 变量，如果类本身需要绑定一个属性，可以直接在 class 中定义属性，这种属性是类属性，归类所有。也就类似于静态属性。</p>
<p>需要注意的是：定义了一个类属性后，这个属性虽然归类所有，但类的所有实例都可以访问到。不要对实例属性和类属性使用相同的名字，因为相同名称的实例属性将屏蔽掉类属性，但是当你删除实例属性后，再使用相同的名称，访问到的将是类属性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  name = <span class="hljs-string">&#x27;Student&#x27;</span><br><br>s = Student() <span class="hljs-comment"># 创建实例s</span><br><span class="hljs-built_in">print</span>(s.name) <span class="hljs-comment"># 打印name属性，因为实例并没有name属性，所以会继续查找class的name属性</span><br><span class="hljs-comment"># Student</span><br><span class="hljs-built_in">print</span>(Student.name) <span class="hljs-comment"># 打印类的name属性</span><br><span class="hljs-comment"># Student</span><br>s.name = <span class="hljs-string">&#x27;Michael&#x27;</span> <span class="hljs-comment"># 给实例绑定name属性</span><br><span class="hljs-built_in">print</span>(s.name) <span class="hljs-comment"># 由于实例属性优先级比类属性高，因此，它会屏蔽掉类的name属性</span><br><span class="hljs-comment"># Michael</span><br><span class="hljs-built_in">print</span>(Student.name) <span class="hljs-comment"># 但是类属性并未消失，用Student.name仍然可以访问</span><br><span class="hljs-comment"># Student</span><br><span class="hljs-keyword">del</span> s.name <span class="hljs-comment"># 如果删除实例的name属性</span><br><span class="hljs-built_in">print</span>(s.name) <span class="hljs-comment"># 再次调用s.name，由于实例的name属性没有找到，类的name属性就显示出来了</span><br><span class="hljs-comment"># Student</span><br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 错误示例。不要这样做</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  name = <span class="hljs-string">&#x27;Student&#x27;</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>    <span class="hljs-variable language_">self</span>.name = name<br></code></pre></td></tr></table></figure>


<h3 id="面向对象高级"><a href="#面向对象高级" class="headerlink" title="面向对象高级"></a>面向对象高级</h3><p><strong><code>__slots__</code></strong></p>
<p>想要限制实例的属性怎么办？比如，只允许对 Student 实例添加 name 和 age 属性，Python 允许在定义 class 的时候，定义一个特殊的 <code>__slots__</code> 变量，来限制该 class 实例能添加的属性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  __slots__ = (<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>) <span class="hljs-comment"># 用tuple定义允许绑定的属性名称</span><br></code></pre></td></tr></table></figure>

<p><strong><code>@property</code></strong></p>
<p>对于 <code>get_name</code> &#x2F; <code>set_name</code>  <code>set_score</code> &#x2F; <code>get_score</code>，这样实现，调用方法又略显复杂，没有直接用属性这么直接简单。能不能用类似属性这样简单的方式来访问类的变量。Python 内置的 <code>@property</code> 装饰器就是负责把一个方法变成属性调用的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_ inherited__">object</span>):<br><span class="hljs-meta">  @property</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">score</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._score<br><br><span class="hljs-meta">  @score.setter</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">score</span>(<span class="hljs-params">self, value</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(value, <span class="hljs-built_in">int</span>):<br>      <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;score must be an integer!&#x27;</span>)<br>    <span class="hljs-keyword">if</span> value &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> value &gt; <span class="hljs-number">100</span>:<br>      <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;score must between 0 ~ 100!&#x27;</span>)<br>    <span class="hljs-variable language_">self</span>._score = value<br></code></pre></td></tr></table></figure>

<p>把一个 getter 方法变成属性，只需要加上 <code>@property</code> 就可以了，<code>@property</code> 本身又创建了另一个装饰器 <code>@score.setter</code>，负责把一个 setter 方法变成属性赋值。</p>
<p><strong>多重继承</strong></p>
<p>Python 支持多重继承</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-comment"># 大类:</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mammal</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Runnable</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Running...&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Flyable</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fly</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Flying...&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(Mammal, Runnable):<br>    <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bat</span>(Mammal, Flyable):<br>  <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure>

<p><strong>枚举类</strong></p>
<p>Python 提供了 Enum 类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum<br><br>Month = Enum(<span class="hljs-string">&#x27;Month&#x27;</span>, (<span class="hljs-string">&#x27;Jan&#x27;</span>, <span class="hljs-string">&#x27;Feb&#x27;</span>, <span class="hljs-string">&#x27;Mar&#x27;</span>, <span class="hljs-string">&#x27;Apr&#x27;</span>, <span class="hljs-string">&#x27;May&#x27;</span>, <span class="hljs-string">&#x27;Jun&#x27;</span>, <span class="hljs-string">&#x27;Jul&#x27;</span>, <span class="hljs-string">&#x27;Aug&#x27;</span>, <span class="hljs-string">&#x27;Sep&#x27;</span>, <span class="hljs-string">&#x27;Oct&#x27;</span>, <span class="hljs-string">&#x27;Nov&#x27;</span>, <span class="hljs-string">&#x27;Dec&#x27;</span>))<br><br></code></pre></td></tr></table></figure>

<p>如果需要更精确地控制枚举类型，可以从 Enum 派生出自定义类，<code>@unique</code> 装饰器可以帮助我们检查保证没有重复值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum, unique<br><br><span class="hljs-meta">@unique</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Weekday</span>(<span class="hljs-title class_ inherited__">Enum</span>):<br>    Sun = <span class="hljs-number">0</span> <span class="hljs-comment"># Sun的value被设定为0</span><br>    Mon = <span class="hljs-number">1</span><br>    Tue = <span class="hljs-number">2</span><br>    Wed = <span class="hljs-number">3</span><br>    Thu = <span class="hljs-number">4</span><br>    Fri = <span class="hljs-number">5</span><br>    Sat = <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure>


<h2 id="错误、调试和测试"><a href="#错误、调试和测试" class="headerlink" title="错误、调试和测试"></a>错误、调试和测试</h2><p><strong>捕获错误</strong></p>
<p>Python提供了一套 <code>try...except...finally...</code> 的错误处理机制。如果发生了不同类型的错误，应该由不同的 <code>except</code> 语句块处理。以有多个 <code>except</code> 来捕获不同类型的错误。可以通过 <code>logging.exception(e)</code> 把错误堆栈打印出来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;try...&#x27;</span>)<br>  r = <span class="hljs-number">10</span> / <span class="hljs-number">0</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;result:&#x27;</span>, r)<br><span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ValueError:&#x27;</span>, e)<br><span class="hljs-keyword">except</span> ZeroDivisionError <span class="hljs-keyword">as</span> e:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ZeroDivisionError:&#x27;</span>, e)<br>  logging.exception(e)<br><span class="hljs-keyword">finally</span>:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;finally...&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;END&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>可以在 <code>except</code> 语句块后面加一个 <code>else</code> ，如果没有错误发生，当没有错误发生时，会自动执行 <code>else</code> 语句。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;try...&#x27;</span>)<br>  r = <span class="hljs-number">10</span> / <span class="hljs-number">0</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;result:&#x27;</span>, r)<br><span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ValueError:&#x27;</span>, e)<br><span class="hljs-keyword">except</span> ZeroDivisionError <span class="hljs-keyword">as</span> e:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ZeroDivisionError:&#x27;</span>, e)<br><span class="hljs-keyword">finally</span>:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;finally...&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;END&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>Python所有的错误都是从 <code>BaseException</code> 类派生的，常见的错误类型和继承关系看这里 - <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy">https://docs.python.org/3/library/exceptions.html#exception-hierarchy</a></p>
<p><strong>抛出错误</strong></p>
<p>要抛出错误，首先根据需要，可以定义一个错误的 <code>class</code>，选择好继承关系，然后，用 <code>raise</code> 语句抛出一个错误的实例。<code>raise</code> 语句后面如果不带参数，就会把当前错误原样抛出。此外，<code>raise</code> 可以另一个新的 <code>Error</code> ，这样就把一种类型的错误转化成另一种类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FooError</span>(<span class="hljs-title class_ inherited__">ValueError</span>):<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">s</span>):<br>    n = <span class="hljs-built_in">int</span>(s)<br>    <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">raise</span> FooError(<span class="hljs-string">&#x27;invalid value: %s&#x27;</span> % s)<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> / n<br><br>foo(<span class="hljs-string">&#x27;0&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p><strong>断言</strong></p>
<p><code>assert</code> 的意思是，表达式 <code>n != 0</code> 应该是 <code>True</code>，否则，根据程序运行的逻辑，后面的代码肯定会出错。如果断言失败，<code>assert</code> 语句本身就会抛出 <code>AssertionError</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">s</span>):<br>  n = <span class="hljs-built_in">int</span>(s)<br>  <span class="hljs-keyword">assert</span> n != <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;n is zero!&#x27;</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> / n<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>  foo(<span class="hljs-string">&#x27;0&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><p>读写文件是最常见的IO操作。Python内置了读写文件的函数，用法和 C 是兼容的。</p>
<p>以读文件的模式打开一个文件对象，使用 Python 内置的 <code>open()</code> 函数，传入文件名和标示符，如果文件不存在，open() 函数就会抛出一个 IOError 的错误，并且给出错误码和详细的信息告诉你文件不存在</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;/path/to/file&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>)<br><span class="hljs-comment"># 读取文件内容</span><br>f.read()<br><span class="hljs-comment"># 每次最多读取 100 个字节的内容</span><br>f.read(<span class="hljs-number">100</span>)<br><span class="hljs-comment"># 每次读取一行内容</span><br>f.readline()<br><span class="hljs-comment"># 一次读取所有内容并按行返回list</span><br>f.readlines()<br><br><span class="hljs-comment"># 传入标识符&#x27;w&#x27; 以写的模式打开文件</span><br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;/path/to/file&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>)<br>f.write(<span class="hljs-string">&#x27;Hello, world!&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>数据读写不一定是文件，也可以在内存中读写。</p>
<ul>
<li><code>StringIO</code> 在内存中读写 str</li>
<li><code>BytesIO</code> 在内存中读写 bytes</li>
</ul>
<h3 id="操作文件和目录"><a href="#操作文件和目录" class="headerlink" title="操作文件和目录"></a>操作文件和目录</h3><p>操作文件和目录的函数一部分放在 <code>os</code> 模块中，一部分放在 <code>os.path</code> 模块中。</p>
<ul>
<li><code>os.path.abspath(&#39;.&#39;)</code> 查看当前目录的绝对路径</li>
<li><code>os.path.join(&#39;/Users/michael&#39;, &#39;testdir&#39;)</code> 把目录的完整路径表示出来</li>
<li><code>os.mkdir(&#39;/Users/michael/testdir&#39;)</code> 创建一个目录</li>
<li><code>os.rmdir(&#39;/Users/michael/testdir&#39;)</code> 删掉一个目录</li>
<li><code>os.rename(&#39;test.txt&#39;, &#39;test.py&#39;)</code> 对文件重命名</li>
<li><code>os.remove(&#39;test.py&#39;)</code> 删除文件</li>
</ul>

      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>iaosee</li>
    <li><strong>本文链接：</strong><a href="http://iaosee.com/2020/11/05/Python-Basic-Syntax-Reference/index.html" title="http:&#x2F;&#x2F;iaosee.com&#x2F;2020&#x2F;11&#x2F;05&#x2F;Python-Basic-Syntax-Reference&#x2F;index.html">http:&#x2F;&#x2F;iaosee.com&#x2F;2020&#x2F;11&#x2F;05&#x2F;Python-Basic-Syntax-Reference&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul> 

        
  <nav class="nav">
    <a href="/2020/11/06/pyhton-download-image-and-merge-mages-into-PDF/"><i class="iconfont iconleft"></i>Python 批量下载图片并合并为 PDF 文件</a>
    <a href="/2020/11/02/Use-Github-Actions-to-automatically-deploy-Hexo-Blog/">使用 Github Actions 自动构建部署 Hexo 博客<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
        <section class="comments">
  
  
<div id="giscus" class="giscus"></div>
<script>
window.onload = function() {

  function loadGiscus() {
    var script = document.createElement("script");
    script.src = 'https://giscus.app/client.js';
    script.type = 'text/javascript';
    script.crossorigin = 'anonymous';
    script.async = true;
    script.dataset.loading = 'lazy';
    script.dataset.repo = 'iaosee/iaosee.github.io';
    script.dataset.repoId = 'MDEwOlJlcG9zaXRvcnk4ODczNjY2Ng==';
    script.dataset.mapping = 'pathname';
    script.dataset.category = 'Announcements';
    script.dataset.categoryId = 'DIC_kwDOBUoDms4CQP9t';
    script.dataset.inputPosition = 'top';
    script.dataset.reactionsEnabled = '1';
    script.dataset.emitMetadata = '0';
    script.dataset.lang = 'zh-CN';
    script.dataset.theme = localStorage.getItem('color-mode') || 'preferred_color_scheme';
    document.getElementById('giscus').parentElement.appendChild(script);
  }

  function sendGiscusMessage(message) {
    var iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    var msgData = { giscus: message };
    // console.log('send message -- ', msgData);
    iframe.contentWindow.postMessage(msgData, 'https://giscus.app');
  }
  // window.sendGiscusMessage = sendGiscusMessage;

  function handleMessage(event) {
    if (event.origin !== 'https://giscus.app') return;
    if (!(typeof event.data === 'object' && event.data.giscus)) return;
    const giscusData = event.data.giscus;
    // console.log('recived giscus message -- ', giscusData)
  }
  window.addEventListener('message', handleMessage);
  window.addEventListener('beforeunload', function() {
    window.removeEventListener('message', handleMessage);
  });

  var toggleElement = document.getElementById('color-toggle');
  if (toggleElement) {
    toggleElement.addEventListener('click', function () {
      const mode = localStorage.getItem('color-mode');
      sendGiscusMessage({
        setConfig: {
          theme: mode,
        }
      });
    });
  }

  if ( false ) {
    $("#comments-btn").on("click", function (e) {
      $(this).hide();
      loadGiscus();
    });
  } else {
    loadGiscus();
  }
}
</script>


</section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">文章目录：</h3>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E7%BC%96%E7%A0%81"><span class="toc-text">字符串和编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list-%E5%92%8C-tuple"><span class="toc-text">list 和 tuple</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">条件判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF"><span class="toc-text">循环</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dict-%E5%92%8C-set"><span class="toc-text">dict 和 set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="toc-text">Python 高级特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-text">模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B"><span class="toc-text">面向对象编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7"><span class="toc-text">面向对象高级</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E3%80%81%E8%B0%83%E8%AF%95%E5%92%8C%E6%B5%8B%E8%AF%95"><span class="toc-text">错误、调试和测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO"><span class="toc-text">IO</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-text">操作文件和目录</span></a></li></ol></li></ol>
  </aside>

        
      </div>
    </div>
  </div>
</main>

  

<footer class="footer">
  <div class="footer-social"><a
        href="https://iaosee.com/images/resource/iaosee-wechat.jpg "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#09BB07'"
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconwechat-fill "></i>
      </a><a
        href="https://github.com/iaosee "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#9f7be1'"
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a><a
        href="mailto:iaosee@outlook.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#FF3B00"
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconmail"></i>
      </a></div>
  
    <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  
</footer>

  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
    <div class="fab fab-like">
      <i class="iconfont iconheart"></i>
    </div>
  
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
  
    
<script src="/js/color-mode.js"></script>

  
  
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>





  
<script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"></script>








<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>



  <script>
  $.getScript("//fastly.jsdelivr.net/npm/leancloud-storage@4.15.2/dist/av.min.js", () => {

    AV.init({
      appId: 'QRsYxiOY3VGeVhkqx7yJiz0U-gzGzoHsz',
      appKey: '1ygwFPYG8IbvlgnrnNXrNeNe',
      serverURLs: 'https://leancloud.cn/',
    });

    const Counter = AV.Object.extend("Counter");
    const Like = AV.Object.extend("Like");

    const showCount = (Counter) => {
      const asyncLimit = new AsyncLimit(2);
      $(".leancloud-counter").each(async (e) => {
        const url = $(".leancloud-counter").eq(e).attr('id').trim();
        const query = new AV.Query("Counter");
        query.equalTo("words", url);
        let count = await asyncLimit.run(() => query.count());
        $(".leancloud-counter").eq(e).text(count ? count : 0);
      });
    }

    const addCount = (Counter) => {
      const url = $(".leancloud-counter").length === 1 ? $(".leancloud-counter").attr('id').trim() : 'http://iaosee.com';
      var query = new Counter;
      query.save({
        words: url
      });
    }

    const showLike = (Like) => {
      const asyncLimit = new AsyncLimit(2);
      $(".leancloud-like").each(async (e) => {
        const url = $(".leancloud-like").eq(e).attr('id').trim();
        const query = new AV.Query("Like");
        query.equalTo("path", url);
        let count = await asyncLimit.run(() => query.count());
        $(".leancloud-like").eq(e).text(count ? count : 0);
      });
    }

    const addLike = (Like) => {
      const url = $(".leancloud-like").length === 1 ? $(".leancloud-like").attr('id').trim() : 'http://iaosee.com';
      var query = new Like;
      query.save({
        path: url,
        nickName: 'Anonymous'
      });
      $(".leancloud-like").addClass('islike');
      $(".fab-like").children(".iconfont").removeClass("iconheart").addClass("iconheart-fill").css("color", "#eb3223");
      ZHAOO.zui.message({ text: '爱你哦~', type: 'success' });
      setTimeout(() => showLike(Like), 1000);
    }

    const handleLikeClick = () => {
      const isLike = $(".leancloud-like").length === 1 && $(".leancloud-like").hasClass('islike') ? true : false;
      if (isLike) {
        ZHAOO.zui.message({ text: '小心心不可以收回呢~', type: 'warning' });
      } else {
        addLike(Like);
      }
    }

    $(function () {
      addCount(Counter);
      showCount(Counter);
      showLike(Like);
      $(".fab-like").on("click", function () {
        handleLikeClick();
      });
    });

  });
</script>






  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>



  <script defer src='https://hm.baidu.com/hm.js?fa215b20eccf04179a4d316087693164'></script>










</html>