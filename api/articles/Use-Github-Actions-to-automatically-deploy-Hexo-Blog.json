{"title":"使用 Github Actions 自动构建部署 Hexo 博客","slug":"Use-Github-Actions-to-automatically-deploy-Hexo-Blog","date":"2020-11-02T13:36:50.000Z","updated":"2020-11-02T13:36:50.000Z","comments":true,"path":"api/articles/Use-Github-Actions-to-automatically-deploy-Hexo-Blog.json","excerpt":null,"covers":["https://z3.ax1x.com/2020/12/24/rc4kxx.png","https://z3.ax1x.com/2020/12/24/rc4Mid.png","https://z3.ax1x.com/2020/12/24/rc4UoQ.png"],"content":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>这篇文章记录一下使用 GitHub Actions 一步一步实现 <a href=\"https://hexo.io/\">Hexo Blog</a> 自动化构建部署到 GitHub Pages 的流程。</p>\n<p><a href=\"https://docs.github.com/cn/free-pro-team@latest/actions\">GitHub Actions</a> 是类似于 <a href=\"https://travis-ci.org/\">Travis CI</a> 、 <a href=\"https://circleci.com/\">Circle CI</a> 这样的持续集成服务， 是由 GitHub 官方推出的持续集成服务，可以帮助我们完成一些自动化测试、打包、部署等操作。</p>\n<p>GitHub Actions 中的常见术语:</p>\n<ul>\n<li><code>workflow</code> 表示一次持续集成的过程</li>\n<li><code>job</code> 表示构建任务，一个 workflow 可以由一个或者多个 job 组成，可支持并发执行多个 job</li>\n<li><code>step</code> 一个 job 由一个或多个 step 组成，按顺序依次执行</li>\n<li><code>action</code> 每个 step 由一个或多个 action 组成，按顺序依次执行</li>\n</ul>\n<br />\n\n<p><strong>官方文档：</strong></p>\n<ul>\n<li><a href=\"https://help.github.com/en/actions\">https://help.github.com/en/actions</a> (English)</li>\n<li><a href=\"https://help.github.com/cn/actions\">https://help.github.com/cn/actions</a> (中文)</li>\n</ul>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><p>创建一个 <code>username.github.io</code> 的仓库， <code>username</code> 为自己 GitHub 的用户名，在这个仓库中采用的一个仓库多分支的方式，一个分支存放博客源码，主分支用来存放生成的网站静态资源。</p>\n<h3 id=\"GitHub-秘钥配置\"><a href=\"#GitHub-秘钥配置\" class=\"headerlink\" title=\"GitHub 秘钥配置\"></a>GitHub 秘钥配置</h3><p>使用命令生成秘钥：该命令会在当前目录下生成两个文件， 分别为公钥 <code>github-deploy-key.pub</code> 和私钥 <code>github-deploy-key</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">ssh-keygen -f github-deploy-key<br></code></pre></td></tr></table></figure>\n\n<p>将创建好的 <code>github-deploy-key.pub</code> 文件中的内容复制添加到对应仓库的 Deploy keys 中， <strong>Settings</strong> &#x2F; <strong>Deploy keys</strong> &#x2F; <strong>Add deploy key</strong>， 取名为 <code>HEXO_DEPLOY_KEY_PUB</code>。</p>\n<p><img  src=\"https://z3.ax1x.com/2020/12/24/rc4kxx.png\"   loading=\"lazy\"><span class=\"image-caption\">HEXO_DEPLOY_KEY_PUB</span></p>\n<p>将创建好的 <code>github-deploy-key</code> 文件中的内容复制添加到对应仓库的 Secrets 中， <strong>Settings</strong> &#x2F; <strong>Secrets</strong> &#x2F; <strong>New Secret</strong>，取名为 <code>HEXO_DEPLOY_KEY_PRI</code>。</p>\n<p><img  src=\"https://z3.ax1x.com/2020/12/24/rc4Mid.png\"   loading=\"lazy\"><span class=\"image-caption\">HEXO_DEPLOY_KEY_PRI</span></p>\n<p>需要注意的是，这里取的名字在 Actions 脚本中通过 <code>$&#123;&#123;secrets.HEXO_DEPLOY_KEY_PRI&#125;&#125;</code> 获取时需要一致。</p>\n<h2 id=\"Github-Actions-脚本编写\"><a href=\"#Github-Actions-脚本编写\" class=\"headerlink\" title=\"Github Actions 脚本编写\"></a>Github Actions 脚本编写</h2><p>在仓库的 <code>.github/workflows/</code> 目录下创建一个 <code>hexo-auto-deploy-ci.yml</code> 文件，这个文件名字可以是随意取得。</p>\n<p>我的 Actions 脚本配置如下：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Hexo</span> <span class=\"hljs-string\">Auto</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">CI</span><br><br><span class=\"hljs-attr\">on:</span><br>  <span class=\"hljs-attr\">push:</span><br>    <span class=\"hljs-attr\">branches:</span> [<span class=\"hljs-string\">source</span>]<br>  <span class=\"hljs-attr\">pull_request:</span><br>    <span class=\"hljs-attr\">branches:</span> [<span class=\"hljs-string\">source</span>]<br><br><span class=\"hljs-attr\">env:</span><br>  <span class=\"hljs-attr\">GIT_USER:</span> <span class=\"hljs-string\">iaosee</span><br>  <span class=\"hljs-attr\">GIT_EMAIL:</span> <span class=\"hljs-string\">iaosee@outlook.com</span><br>  <span class=\"hljs-attr\">THEME_REPO:</span> <span class=\"hljs-string\">iaosee/hexo-theme-zhaoo</span><br>  <span class=\"hljs-attr\">THEME_BRANCH:</span> <span class=\"hljs-string\">master</span><br><br><span class=\"hljs-attr\">jobs:</span><br>  <span class=\"hljs-attr\">build:</span><br>    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Build</span> <span class=\"hljs-string\">on</span> <span class=\"hljs-string\">node</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.node_version</span> <span class=\"hljs-string\">&#125;&#125;</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.os</span> <span class=\"hljs-string\">&#125;&#125;</span><br>    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span><br>    <span class=\"hljs-attr\">strategy:</span><br>      <span class=\"hljs-attr\">matrix:</span><br>        <span class=\"hljs-attr\">os:</span> [<span class=\"hljs-string\">ubuntu-latest</span>]<br>        <span class=\"hljs-attr\">node_version:</span> [<span class=\"hljs-number\">12.</span><span class=\"hljs-string\">x</span>]<br><br>    <span class=\"hljs-attr\">steps:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span> <span class=\"hljs-string\">blog</span> <span class=\"hljs-string\">repo</span><br>        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span><br>        <span class=\"hljs-attr\">with:</span><br>          <span class=\"hljs-attr\">ref:</span> <span class=\"hljs-string\">source</span><br><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span> <span class=\"hljs-string\">theme</span> <span class=\"hljs-string\">repo</span><br>        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span><br>        <span class=\"hljs-attr\">with:</span><br>          <span class=\"hljs-attr\">repository:</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">env.THEME_REPO</span> <span class=\"hljs-string\">&#125;&#125;</span><br>          <span class=\"hljs-attr\">ref:</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">env.THEME_BRANCH</span> <span class=\"hljs-string\">&#125;&#125;</span><br>          <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">themes/zhaoo</span><br><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Use</span> <span class=\"hljs-string\">Node.js</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.node_version</span> <span class=\"hljs-string\">&#125;&#125;</span><br>        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-node@v1</span><br>        <span class=\"hljs-attr\">with:</span><br>          <span class=\"hljs-attr\">node-version:</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.node_version</span> <span class=\"hljs-string\">&#125;&#125;</span><br><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Configuration</span> <span class=\"hljs-string\">environment</span><br>        <span class=\"hljs-attr\">env:</span><br>          <span class=\"hljs-attr\">HEXO_DEPLOY_KEY_PRI:</span> <span class=\"hljs-string\">$&#123;&#123;secrets.HEXO_DEPLOY_KEY_PRI&#125;&#125;</span><br>        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|</span><br><span class=\"hljs-string\">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span><br><span class=\"hljs-string\">          mkdir -p ~/.ssh/</span><br><span class=\"hljs-string\">          echo &quot;$HEXO_DEPLOY_KEY_PRI&quot; &gt; ~/.ssh/id_rsa</span><br><span class=\"hljs-string\">          chmod 600 ~/.ssh/id_rsa</span><br><span class=\"hljs-string\">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><br><span class=\"hljs-string\">          git config --global user.name $GIT_USER</span><br><span class=\"hljs-string\">          git config --global user.email $GIT_EMAIL</span><br><span class=\"hljs-string\"></span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">dependencies</span><br>        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|</span><br><span class=\"hljs-string\">          npm i</span><br><span class=\"hljs-string\"></span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">blog</span><br>        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|</span><br><span class=\"hljs-string\">          npm run clean</span><br><span class=\"hljs-string\">          npm run deploy</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"运行脚本\"><a href=\"#运行脚本\" class=\"headerlink\" title=\"运行脚本\"></a>运行脚本</h3><p>现在，只要仓库的 <code>source</code> 分支有代码推送，GitHub 就会创建一个容器来运行这里配置的任务，解放双手，Enjoy It 😃。</p>\n<p><img  src=\"https://z3.ax1x.com/2020/12/24/rc4UoQ.png\"   loading=\"lazy\"><span class=\"image-caption\">Actions 脚本运行结果</span></p>\n","more":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>这篇文章记录一下使用 GitHub Actions 一步一步实现 <a href=\"https://hexo.io/\">Hexo Blog</a> 自动化构建部署到 GitHub Pages 的流程。</p>\n<p><a href=\"https://docs.github.com/cn/free-pro-team@latest/actions\">GitHub Actions</a> 是类似于 <a href=\"https://travis-ci.org/\">Travis CI</a> 、 <a href=\"https://circleci.com/\">Circle CI</a> 这样的持续集成服务， 是由 GitHub 官方推出的持续集成服务，可以帮助我们完成一些自动化测试、打包、部署等操作。</p>\n<p>GitHub Actions 中的常见术语:</p>\n<ul>\n<li><code>workflow</code> 表示一次持续集成的过程</li>\n<li><code>job</code> 表示构建任务，一个 workflow 可以由一个或者多个 job 组成，可支持并发执行多个 job</li>\n<li><code>step</code> 一个 job 由一个或多个 step 组成，按顺序依次执行</li>\n<li><code>action</code> 每个 step 由一个或多个 action 组成，按顺序依次执行</li>\n</ul>\n<br />\n\n<p><strong>官方文档：</strong></p>\n<ul>\n<li><a href=\"https://help.github.com/en/actions\">https://help.github.com/en/actions</a> (English)</li>\n<li><a href=\"https://help.github.com/cn/actions\">https://help.github.com/cn/actions</a> (中文)</li>\n</ul>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><p>创建一个 <code>username.github.io</code> 的仓库， <code>username</code> 为自己 GitHub 的用户名，在这个仓库中采用的一个仓库多分支的方式，一个分支存放博客源码，主分支用来存放生成的网站静态资源。</p>\n<h3 id=\"GitHub-秘钥配置\"><a href=\"#GitHub-秘钥配置\" class=\"headerlink\" title=\"GitHub 秘钥配置\"></a>GitHub 秘钥配置</h3><p>使用命令生成秘钥：该命令会在当前目录下生成两个文件， 分别为公钥 <code>github-deploy-key.pub</code> 和私钥 <code>github-deploy-key</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">ssh-keygen -f github-deploy-key<br></code></pre></td></tr></table></figure>\n\n<p>将创建好的 <code>github-deploy-key.pub</code> 文件中的内容复制添加到对应仓库的 Deploy keys 中， <strong>Settings</strong> &#x2F; <strong>Deploy keys</strong> &#x2F; <strong>Add deploy key</strong>， 取名为 <code>HEXO_DEPLOY_KEY_PUB</code>。</p>\n<p><img  src=\"https://z3.ax1x.com/2020/12/24/rc4kxx.png\"   loading=\"lazy\"><span class=\"image-caption\">HEXO_DEPLOY_KEY_PUB</span></p>\n<p>将创建好的 <code>github-deploy-key</code> 文件中的内容复制添加到对应仓库的 Secrets 中， <strong>Settings</strong> &#x2F; <strong>Secrets</strong> &#x2F; <strong>New Secret</strong>，取名为 <code>HEXO_DEPLOY_KEY_PRI</code>。</p>\n<p><img  src=\"https://z3.ax1x.com/2020/12/24/rc4Mid.png\"   loading=\"lazy\"><span class=\"image-caption\">HEXO_DEPLOY_KEY_PRI</span></p>\n<p>需要注意的是，这里取的名字在 Actions 脚本中通过 <code>$&#123;&#123;secrets.HEXO_DEPLOY_KEY_PRI&#125;&#125;</code> 获取时需要一致。</p>\n<h2 id=\"Github-Actions-脚本编写\"><a href=\"#Github-Actions-脚本编写\" class=\"headerlink\" title=\"Github Actions 脚本编写\"></a>Github Actions 脚本编写</h2><p>在仓库的 <code>.github/workflows/</code> 目录下创建一个 <code>hexo-auto-deploy-ci.yml</code> 文件，这个文件名字可以是随意取得。</p>\n<p>我的 Actions 脚本配置如下：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Hexo</span> <span class=\"hljs-string\">Auto</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">CI</span><br><br><span class=\"hljs-attr\">on:</span><br>  <span class=\"hljs-attr\">push:</span><br>    <span class=\"hljs-attr\">branches:</span> [<span class=\"hljs-string\">source</span>]<br>  <span class=\"hljs-attr\">pull_request:</span><br>    <span class=\"hljs-attr\">branches:</span> [<span class=\"hljs-string\">source</span>]<br><br><span class=\"hljs-attr\">env:</span><br>  <span class=\"hljs-attr\">GIT_USER:</span> <span class=\"hljs-string\">iaosee</span><br>  <span class=\"hljs-attr\">GIT_EMAIL:</span> <span class=\"hljs-string\">iaosee@outlook.com</span><br>  <span class=\"hljs-attr\">THEME_REPO:</span> <span class=\"hljs-string\">iaosee/hexo-theme-zhaoo</span><br>  <span class=\"hljs-attr\">THEME_BRANCH:</span> <span class=\"hljs-string\">master</span><br><br><span class=\"hljs-attr\">jobs:</span><br>  <span class=\"hljs-attr\">build:</span><br>    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Build</span> <span class=\"hljs-string\">on</span> <span class=\"hljs-string\">node</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.node_version</span> <span class=\"hljs-string\">&#125;&#125;</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.os</span> <span class=\"hljs-string\">&#125;&#125;</span><br>    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span><br>    <span class=\"hljs-attr\">strategy:</span><br>      <span class=\"hljs-attr\">matrix:</span><br>        <span class=\"hljs-attr\">os:</span> [<span class=\"hljs-string\">ubuntu-latest</span>]<br>        <span class=\"hljs-attr\">node_version:</span> [<span class=\"hljs-number\">12.</span><span class=\"hljs-string\">x</span>]<br><br>    <span class=\"hljs-attr\">steps:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span> <span class=\"hljs-string\">blog</span> <span class=\"hljs-string\">repo</span><br>        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span><br>        <span class=\"hljs-attr\">with:</span><br>          <span class=\"hljs-attr\">ref:</span> <span class=\"hljs-string\">source</span><br><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Checkout</span> <span class=\"hljs-string\">theme</span> <span class=\"hljs-string\">repo</span><br>        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v2</span><br>        <span class=\"hljs-attr\">with:</span><br>          <span class=\"hljs-attr\">repository:</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">env.THEME_REPO</span> <span class=\"hljs-string\">&#125;&#125;</span><br>          <span class=\"hljs-attr\">ref:</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">env.THEME_BRANCH</span> <span class=\"hljs-string\">&#125;&#125;</span><br>          <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">themes/zhaoo</span><br><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Use</span> <span class=\"hljs-string\">Node.js</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.node_version</span> <span class=\"hljs-string\">&#125;&#125;</span><br>        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-node@v1</span><br>        <span class=\"hljs-attr\">with:</span><br>          <span class=\"hljs-attr\">node-version:</span> <span class=\"hljs-string\">$&#123;&#123;</span> <span class=\"hljs-string\">matrix.node_version</span> <span class=\"hljs-string\">&#125;&#125;</span><br><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Configuration</span> <span class=\"hljs-string\">environment</span><br>        <span class=\"hljs-attr\">env:</span><br>          <span class=\"hljs-attr\">HEXO_DEPLOY_KEY_PRI:</span> <span class=\"hljs-string\">$&#123;&#123;secrets.HEXO_DEPLOY_KEY_PRI&#125;&#125;</span><br>        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|</span><br><span class=\"hljs-string\">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span><br><span class=\"hljs-string\">          mkdir -p ~/.ssh/</span><br><span class=\"hljs-string\">          echo &quot;$HEXO_DEPLOY_KEY_PRI&quot; &gt; ~/.ssh/id_rsa</span><br><span class=\"hljs-string\">          chmod 600 ~/.ssh/id_rsa</span><br><span class=\"hljs-string\">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><br><span class=\"hljs-string\">          git config --global user.name $GIT_USER</span><br><span class=\"hljs-string\">          git config --global user.email $GIT_EMAIL</span><br><span class=\"hljs-string\"></span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">dependencies</span><br>        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|</span><br><span class=\"hljs-string\">          npm i</span><br><span class=\"hljs-string\"></span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">blog</span><br>        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|</span><br><span class=\"hljs-string\">          npm run clean</span><br><span class=\"hljs-string\">          npm run deploy</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"运行脚本\"><a href=\"#运行脚本\" class=\"headerlink\" title=\"运行脚本\"></a>运行脚本</h3><p>现在，只要仓库的 <code>source</code> 分支有代码推送，GitHub 就会创建一个容器来运行这里配置的任务，解放双手，Enjoy It 😃。</p>\n<p><img  src=\"https://z3.ax1x.com/2020/12/24/rc4UoQ.png\"   loading=\"lazy\"><span class=\"image-caption\">Actions 脚本运行结果</span></p>\n","categories":[{"name":"CI/CD","path":"api/categories/CI/CD.json"}],"tags":[{"name":"CI/CD","path":"api/tags/CI/CD.json"},{"name":"GitHub Actions","path":"api/tags/GitHub Actions.json"}]}